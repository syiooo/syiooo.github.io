
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.sy-study.top/3_CSAPP/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86/%E5%AE%B6%E5%BA%AD%E4%BD%9C%E4%B8%9A/">
      
      
        <link rel="prev" href="../%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE%E8%AF%B4%E6%98%8E/">
      
      
        <link rel="next" href="../%E7%BB%83%E4%B9%A0%E9%A2%98%E7%AD%94%E6%A1%88/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>家庭作业 - Sy_Blog&Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,300i,400,400i,700,700i%7CNoto+Sans+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Serif SC";--md-code-font:"Noto Sans Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Sy_Blog&amp;Notes" class="md-header__button md-logo" aria-label="Sy_Blog&Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sy_Blog&Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              家庭作业
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../1_Math/%E3%80%90Math%E3%80%91%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80%E6%95%B4%E7%90%86/" class="md-tabs__link">
          
  
  
    
  
  1 Math

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../2_English/%E5%A4%96%E5%88%8A/%E3%80%90Guardian%E3%80%91Israel-strikes-Syria%E2%80%99s-defence-ministry-in-third-day-of-attacks/" class="md-tabs__link">
          
  
  
    
  
  2 English

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  3 CSAPP

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../4_Experience/" class="md-tabs__link">
          
  
  
    
  
  4 Experience

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Sy_Blog&amp;Notes" class="md-nav__button md-logo" aria-label="Sy_Blog&Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sy_Blog&Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../1_Math/%E3%80%90Math%E3%80%91%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80%E6%95%B4%E7%90%86/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    1 Math
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../2_English/%E5%A4%96%E5%88%8A/%E3%80%90Guardian%E3%80%91Israel-strikes-Syria%E2%80%99s-defence-ministry-in-third-day-of-attacks/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    2 English
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    3 CSAPP
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            3 CSAPP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%BC%AB%E6%B8%B8/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    第一章 计算机系统漫游
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    第二章 信息的表示和处理
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            第二章 信息的表示和处理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.1%20%E4%BF%A1%E6%81%AF%E5%AD%98%E5%82%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.1 信息存储
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.2%20%E6%95%B4%E6%95%B0%E8%A1%A8%E7%A4%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.2 整数表示
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.3%20%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.3 整数运算
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.4%20%E6%B5%AE%E7%82%B9%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.4 浮点数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.5%20%E5%B0%8F%E7%BB%93/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.5 小结
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE%E8%AF%B4%E6%98%8E/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    参考文献说明
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    家庭作业
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BB%83%E4%B9%A0%E9%A2%98%E7%AD%94%E6%A1%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    练习题答案
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../4_Experience/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    4 Experience
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../blog/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>家庭作业</h1>

<ul>
<li>
<p>2.55 在你能够访问的不同机器上,使用 show_bytes(文件 show-bytes.c) 编译并运行示例代码。确定这些机器使用的字节顺序。</p>
</li>
<li>
<p>2.56 试着用不同的示例值来运行 show_bytes 的代码。</p>
</li>
<li>
<p>2.57 编写程序 show_short、show_long 和 show_double, 它们分别打印类型为 short、long 和 double 的 C 语言对象的字节表示。请试着在几种机器上运行。</p>
</li>
</ul>
<p>** 2.58 编写过程 is_little_endian, 当在小端法机器上编译和运行时返回 1,在大端法机器上编译运行时则返回 0 。这个程序应该可以运行在任何机器上, 无论机器的字长是多少。</p>
<p>** 2.59 编写一个 <span class="arithmatex">\(\mathrm{C}\)</span> 表达式,它生成一个字,由 <span class="arithmatex">\(\mathrm{x}\)</span> 的最低有效字节和 <span class="arithmatex">\(\mathrm{y}\)</span> 中剩下的字节组成。对于运算数 <span class="arithmatex">\(\mathrm{x}\)</span> $= 0 \times  {89}\mathrm {{ABCDEF}} $ 和 <span class="arithmatex">\(y = 0 \times  {76543210}\)</span> ,就得到 $0 \times  {765432}\mathrm {{EF}} $ 。</p>
<p><span class="arithmatex">\(*  * {2.60}\)</span> 假设我们将一个 <span class="arithmatex">\(w\)</span> 位的字中的字节从 0 (最低位) 到 <span class="arithmatex">\(w/8 - 1\)</span> (最高位) 编号。写出下面 <span class="arithmatex">\(\mathrm{C}\)</span> 函数的代码,它会返回一个无符号值,其中参数 <span class="arithmatex">\(\mathrm{x}\)</span> 的字节 <span class="arithmatex">\(\mathrm{i}\)</span> 被替换成字节 <span class="arithmatex">\(\mathrm{b}\)</span> :</p>
<hr />
<p>unsigned replace_byte (unsigned <span class="arithmatex">\(x\)</span> ,int i,unsigned char b);</p>
<hr />
<p>以下示例, 说明了这个函数该如何工作:</p>
<hr />
<p>replace_byte <span class="arithmatex">\(\left( {\text{0 x 12345678},2,\text{0 xAB}}\right) \; -  \rightarrow\)</span> 0 x 12 AB 5678
replace_byte <span class="arithmatex">\(\left( {\text{0 x 12345678},0,\text{0 xAB}}\right) \; -  \rightarrow\)</span> 0 x 123456 AB</p>
<hr />
<p>位级整数编码规则</p>
<p>在接下来的作业中,我们特意限制了你能使用的编程结构,来帮你更好地理解 <span class="arithmatex">\(\mathrm{C}\)</span> 语言的位级、逻辑和算术运算。在回答这些问题时, 你的代码必须遵守以下规则:</p>
<ul>
<li>
<p>假设</p>
</li>
<li>
<p>整数用补码形式表示。</p>
</li>
<li>
<p>有符号数的右移是算术右移。</p>
</li>
<li>
<p>数据类型 int 是 <span class="arithmatex">\(w\)</span> 位长的。对于某些题目,会给定 <span class="arithmatex">\(w\)</span> 的值,但是在其他情况下,只要 <span class="arithmatex">\(w\)</span> 是 8 的整数倍,你的代码就应该能工作。你可以用表达式 sizeof (int) <span class="arithmatex">\(&lt;  &lt; 3\)</span> 来计算 <span class="arithmatex">\(w\)</span> 。</p>
</li>
</ul>
<!-- Meanless: 第 2 章 信息的表示和处理 89-->

<ul>
<li>禁止使用</li>
</ul>
<p>一条件语句 (if 或者？:)、循环、分支语句、函数调用和宏调用。</p>
<ul>
<li>
<p>除法、模运算和乘法。</p>
</li>
<li>
<p>相对比较运算 <span class="arithmatex">\(\left( { &lt; \text{、} &gt; \text{、} &lt;  = \text{和} &gt;  = }\right)\)</span> 。</p>
</li>
<li>
<p>允许的运算</p>
</li>
<li>
<p>所有的位级和逻辑运算。</p>
</li>
<li>
<p>左移和右移,但是位移量只能在 0 和 <span class="arithmatex">\(w - 1\)</span> 之间。</p>
</li>
<li>
<p>加法和减法。</p>
</li>
<li>
<p>相等( <span class="arithmatex">\(=  =\)</span> )和不相等( <span class="arithmatex">\(=\)</span> )测试。(在有些题目中,也不允许这些运算。)</p>
</li>
<li>
<p>整型常数 INT_MIN 和 INT_MAX。</p>
</li>
<li>
<p>对 int 和 unsigned 进行强制类型转换, 无论是显式的还是隐式的。</p>
</li>
</ul>
<p>即使有这些条件的限制, 你仍然可以选择带有描述性的变量名, 并且使用注释来描述你的解决方案的逻辑, 尽量提高代码的可读性。例如, 下面这段代码从整数参数 x 中抽取出最高有效字节:</p>
<hr />
<p>/<em> Get most significant byte from <span class="arithmatex">\(x * /\)</span>
int get_msb(int x) {
    /</em> Shift by w-8 <em>/
    int shift_val = (sizeof(int)-1)&lt;&lt;3;
    /</em> Arithmetic shift <em>/
    int xright = x &gt;&gt; shift_val;
    /</em> Zero all but LSB */
    return xright &amp; 0 xFF;
}</p>
<hr />
<p>** 2.61 写一个 C 表达式,在下列描述的条件下产生 1 , 而在其他情况下得到 0 。假设 x 是 int 类型。</p>
<p>A. <span class="arithmatex">\(\mathrm{x}\)</span> 的任何位都等于 1 。</p>
<p>B. <span class="arithmatex">\(\mathrm{x}\)</span> 的任何位都等于 0 。</p>
<p>C. <span class="arithmatex">\(\mathrm{x}\)</span> 的最低有效字节中的位都等于 1 。</p>
<p>D. <span class="arithmatex">\(\mathrm{x}\)</span> 的最高有效字节中的位都等于 0 。</p>
<p>代码应该遵循位级整数编码规则,另外还有一个限制,你不能使用相等 <span class="arithmatex">\(\left( { =  = }\right)\)</span> 和不相等 <span class="arithmatex">\(\left( {! = }\right)\)</span> 测试。</p>
<p>** 2.62 编写一个函数 int_shifts_are_arithmetic(   ), 在对 int 类型的数使用算术右移的机器上运行时这个函数生成 1 , 而其他情况下生成 0 。你的代码应该可以运行在任何字长的机器上。在几种机器上测试你的代码。</p>
<p>** 2.63 将下面的 <span class="arithmatex">\(\mathrm{C}\)</span> 函数代码补充完整。函数 srl 用算术右移 (由值 xsra 给出) 来完成逻辑右移,后面的其他操作不包括右移或者除法。函数 sra 用逻辑右移 (由值 xsrl 给出) 来完成算术右移, 后面的其他操作不包括右移或者除法。可以通过计算 <span class="arithmatex">\(8 \star  \operatorname{sizeof}\left( \operatorname{int}\right)\)</span> 来确定数据类型 int 中的位数 <span class="arithmatex">\(w\)</span> 。位移量 <span class="arithmatex">\(k\)</span> 的取值范围为 <span class="arithmatex">\(0 \sim  w - 1\)</span> 。</p>
<hr />
<p>unsigned srl (unsigned x, int k) {
    /<em> Perform shift arithmetically </em>/
    unsigned xsra = (int) <span class="arithmatex">\(x \gg  k\)</span> ;
}
int sra( int x, int k ) {
    /<em> Perform shift logically </em>/
    int xsrl = (unsigned) <span class="arithmatex">\(x \gg  x\)</span> k;
<span class="arithmatex">\(\vdots\)</span>
}</p>
<hr />
<!-- Meanless: 90 第一部分 程序结构和执行-->

<p>*2.64 写出代码实现如下函数:</p>
<hr />
<p>/<em> Return 1 when any odd bit of <span class="arithmatex">\(x\)</span> equals 1; 0 otherwise.
    Assume w=32 </em>/
int any_odd_one(unsigned x);</p>
<hr />
<p>函数应该遵循位级整数编码规则,不过你可以假设数据类型 int 有 <span class="arithmatex">\(w = {32}\)</span> 位。</p>
<p>** 2.65 写出代码实现如下函数:</p>
<hr />
<p>/<em> Return 1 when <span class="arithmatex">\(x\)</span> contains an odd number of 1 s; 0 otherwise.
    Assume w=32 </em>/
int odd_ones(unsigned x);</p>
<hr />
<p>函数应该遵循位级整数编码规则,不过你可以假设数据类型 int 有 <span class="arithmatex">\(w = {32}\)</span> 位。</p>
<p>你的代码最多只能包含 12 个算术运算、位运算和逻辑运算。</p>
<p>** 2.66 写出代码实现如下函数:</p>
<hr />
<p>/<em>
                                                            * Generate mask indicating leftmost 1 in <span class="arithmatex">\(x\)</span> . Assume <span class="arithmatex">\(w = {32}\)</span> .
                                                                * For example, 0 xFF 00 -&gt; 0 x 8000, and 0 x 6600 -&gt; 0 x 4000.
                                                        * If <span class="arithmatex">\(x = 0\)</span> ,then return 0 .
                                                    </em>/
int leftmost_one(unsigned x);</p>
<hr />
<p>函数应该遵循位级整数编码规则,不过你可以假设数据类型 int 有 <span class="arithmatex">\(w = {32}\)</span> 位。</p>
<p>你的代码最多只能包含 15 个算术运算、位运算和逻辑运算。</p>
<p>提示: 先将 x 转换成形如 <span class="arithmatex">\(\left\lbrack  {0\cdots {011}\cdots 1}\right\rbrack\)</span> 的位向量。</p>
<p>** 2.67 给你一个任务,编写一个过程 int_size_is_32(   ), 当在一个 int 是 32 位的机器上运行时, 该程序产生 1 , 而其他情况则产生 0 。不允许使用 sizeof 运算符。下面是开始时的尝试:</p>
<hr />
<p>/<em> The following code does not run properly on some machines <span class="arithmatex">\(* /\)</span>
int bad_int_size_is_32(   ) {
        /</em> Set most significant bit (msb) of 32-bit machine <em>/
        int set_msb = 1 &lt;&lt; 31 ;
        /</em> Shift past msb of 32-bit word <em>/
        int beyond_msb = 1 &lt;&lt; 32 ;
        /</em> set_msb is nonzero when word size <span class="arithmatex">\(&gt;  = {32}\)</span>
            beyond_msb is zero when word size <span class="arithmatex">\(&lt;  = {32} * /\)</span>
        return set_msb &amp;&amp; !beyond_msb;
}</p>
<hr />
<p>当在 SUN SPARC 这样的 32 位机器上编译并运行时, 这个过程返回的却是 0 。下面的编译器信息给了我们一个问题的指示:</p>
<hr />
<p>warning: left shift count <span class="arithmatex">\(&gt;  =\)</span> width of type</p>
<hr />
<p>A. 我们的代码在哪个方面没有遵守 <span class="arithmatex">\(\mathrm{C}\)</span> 语言标准?</p>
<p>B. 修改代码, 使得它在 int 至少为 32 位的任何机器上都能正确地运行。</p>
<p>C. 修改代码, 使得它在 int 至少为 16 位的任何机器上都能正确地运行。</p>
<p>** 2.68 写出具有如下原型的函数的代码:</p>
<hr />
<p>/<em>
    * Mask with least signficant <span class="arithmatex">\(n\)</span> bits set to 1
    * Examples: <span class="arithmatex">\(\mathrm{n} = 6 \rightarrow  0\mathrm{x}3\mathrm{\;F},\mathrm{n} = {17} \rightarrow  0\mathrm{x}1\mathrm{F}\mathrm{F}\mathrm{F}\mathrm{F}\)</span>
    * Assume 1 &lt;= <span class="arithmatex">\(n &lt;  = w\)</span>
    </em>/
int lower_one_mask(int n);</p>
<hr />
<p>函数应该遵循位级整数编码规则。要注意 <span class="arithmatex">\(\mathrm{n} = w\)</span> 的情况。</p>
<p>** 2.69 写出具有如下原型的函数的代码:</p>
<!-- Meanless: 第 2 章 信息的表示和处理 91-->

<hr />
<p>/<em>
    * Do rotating left shift. Assume <span class="arithmatex">\(0 &lt;  = n &lt; w\)</span>
    * Examples when <span class="arithmatex">\(\mathrm{x} = 0\mathrm{x}{12345678}\)</span> and <span class="arithmatex">\(\mathrm{w} = {32}\)</span> :
                <span class="arithmatex">\(\mathrm{n} = 4 \rightarrow  0\mathrm{x}{23456781},\mathrm{\;n} = {20} \rightarrow  0\mathrm{x}{67812345}\)</span>
    </em>/
unsigned rotate_left(unsigned <span class="arithmatex">\(x\)</span> ,int <span class="arithmatex">\(n\)</span> );</p>
<hr />
<p>函数应该遵循位级整数编码规则。要注意 <span class="arithmatex">\(\mathrm{n} = 0\)</span> 的情况。</p>
<p>** 2.70 写出具有如下原型的函数的代码:</p>
<hr />
<p>/<em>
    * Return 1 when <span class="arithmatex">\(x\)</span> can be represented as an <span class="arithmatex">\(n\)</span> -bit, <span class="arithmatex">\({2}^{\prime }s\)</span> -complement
    * number; 0 otherwise
    * Assume <span class="arithmatex">\(1 &lt;  = \mathrm{n} &lt;  = \mathrm{w}\)</span>
    </em>/
int fits_bits(int x, int n);</p>
<hr />
<p>函数应该遵循位级整数编码规则。</p>
<p>*2.71 你刚刚开始在一家公司工作, 他们要实现一组过程来操作一个数据结构, 要将 4 个有符号字节封装成一个 32 位 unsigned。一个字中的字节从 0 (最低有效字节) 编号到 3 (最高有效字节)。分配给你的任务是：为一个使用补码运算和算术右移的机器编写一个具有如下原型的函数：</p>
<hr />
<p>/<em> Declaration of data type where 4 bytes are packed
    into an unsigned </em>/
typedef unsigned packed_t;
/<em> Extract byte from word. Return as signed integer </em>/
int xbyte(packed_t word, int bytenum);</p>
<hr />
<p>也就是说, 函数会抽取出指定的字节, 再把它符号扩展为一个 32 位 int。</p>
<p>你的前任 (因为水平不够高而被解雇了) 编写了下面的代码:</p>
<hr />
<p>/<em> Failed attempt at xbyte </em>/
int xbyte(packed_t word, int bytenum)
{
    return (word &gt;&gt; (bytenum &lt;&lt; 3)) &amp; OxFF;</p>
<hr />
<p>. }</p>
<p>A. 这段代码错在哪里?</p>
<p>B. 给出函数的正确实现, 只能使用左右移位和一个减法。</p>
<p>** 2.72 给你一个任务,写一个函数,将整数 val 复制到缓冲区 buf 中,但是只有当缓冲区中有足够可用的空间时, 才执行复制。</p>
<p>你写的代码如下:</p>
<hr />
<p>/<em> Copy integer into buffer if space is available <span class="arithmatex">\(*\)</span> /
/</em> WARNING: The following code is buggy <em>/
void copy_int( int val, void </em>buf, int maxbytes ) {
    if (maxbytes-sizeof(val) &gt;= 0)
            memcpy(buf, (void *) &amp;val, sizeof(val));
}</p>
<hr />
<p>这段代码使用了库函数 memcpy。虽然在这里用这个函数有点刻意, 因为我们只是想复制一个 int, 但是它说明了一种复制较大数据结构的常见方法。</p>
<p>你仔细地测试了这段代码后发现, 哪怕 maxbytes 很小的时候, 它也能把值复制到缓冲区中。 A. 解释为什么代码中的条件测试总是成功。提示：sizeof 运算符返回类型为 size_t 的值。 B. 你该如何重写这个条件测试, 使之工作正确。</p>
<p>** 2.73 写出具有如下原型的函数的代码:</p>
<hr />
<p>/<em> Addition that saturates to TMin or TMax </em>/
int saturating_add(int x, int y);</p>
<hr />
<!-- Meanless: 92 第一部分 程序结构和执行-->

<p>同正常的补码加法溢出的方式不同,当正溢出时,饱和加法返回 <span class="arithmatex">\({TMax}\)</span> ,负溢出时,返回 <span class="arithmatex">\({TMin}\)</span> 。饱和运算常常用在执行数字信号处理的程序中。</p>
<p>你的函数应该遵循位级整数编码规则。</p>
<p>** 2.74 写出具有如下原型的函数的代码:</p>
<hr />
<p>/<em> Determine whether arguments can be subtracted without overflow </em>/
    int tsub_ok( int x, int y ) ;</p>
<hr />
<p>如果计算 <span class="arithmatex">\(\mathrm{x} - \mathrm{y}\)</span> 不溢出,这个函数就返回 1 。</p>
<p>** 2.75 假设我们想要计算 <span class="arithmatex">\(x \cdot  y\)</span> 的完整的 <span class="arithmatex">\({2 w}\)</span> 位表示,其中, <span class="arithmatex">\(x\)</span> 和 <span class="arithmatex">\(y\)</span> 都是无符号数,并且运行在数据类型 unsigned 是 <span class="arithmatex">\(w\)</span> 位的机器上。乘积的低 <span class="arithmatex">\(w\)</span> 位能够用表达式 <span class="arithmatex">\({\mathrm{x}}^{ \star  }\mathrm{y}\)</span> 计算,所以,我们只需要一个具有下列原型的函数:</p>
<hr />
<p>unsigned unsigned_high_prod(unsigned x, unsigned y);</p>
<hr />
<p>这个函数计算无符号变量 <span class="arithmatex">\(x \cdot  y\)</span> 的高 <span class="arithmatex">\(w\)</span> 位。</p>
<p>我们使用一个具有下面原型的库函数:</p>
<hr />
<p>int signed_high_prod( int x, int y ) ;</p>
<hr />
<p>它计算在 <span class="arithmatex">\(x\)</span> 和 <span class="arithmatex">\(y\)</span> 采用补码形式的情况下, <span class="arithmatex">\(x \cdot  y\)</span> 的高 <span class="arithmatex">\(w\)</span> 位。编写代码调用这个过程,以实现用无符号数为参数的函数。验证你的解答的正确性。</p>
<p>提示: 看看等式 (2.18) 的推导中,有符号乘积 <span class="arithmatex">\(x \cdot  y\)</span> 和无符号乘积 <span class="arithmatex">\({x}^{\prime } \cdot  {y}^{\prime }\)</span> 之间的关系。</p>
<ul>
<li>2.76 库函数 calloc 有如下声明：</li>
</ul>
<hr />
<p>void *calloc(size_t nmemb, size_t size);</p>
<hr />
<p>根据库文档： “函数 calloc 为一个数组分配内存, 该数组有 nmemb 个元素, 每个元素为 size 字节。内存设置为 0 。如果 nmemb 或 size 为 0 ,则 calloc 返回 NULL。”</p>
<p>编写 calloc 的实现, 通过调用 malloc 执行分配, 调用 memset 将内存设置为 0 。你的代码应该没有任何由算术溢出引起的漏洞, 且无论数据类型 size_t 用多少位表示, 代码都应该正常工作。</p>
<p>作为参考, 函数 malloc 和 memset 声明如下:</p>
<hr />
<p>void <em>malloc(size_t size);
void </em>memset(void *s, int c, size_t n);</p>
<hr />
<p>** 2.77 假设我们有一个任务：生成一段代码,将整数变量 <span class="arithmatex">\(\mathrm{x}\)</span> 乘以不同的常数因子 <span class="arithmatex">\(K\)</span> 。为了提高效率,我们想只使用 <span class="arithmatex">\(+ \text{、} -\)</span> 和 <span class="arithmatex">\(\ll\)</span> 运算。对于下列 <span class="arithmatex">\(K\)</span> 的值,写出执行乘法运算的 <span class="arithmatex">\(\mathrm{C}\)</span> 表达式,每个表达式中最多使用 3 个运算。</p>
<p>A. <span class="arithmatex">\(K = {17}\)</span></p>
<p>B. <span class="arithmatex">\(K =  - 7\)</span></p>
<p>C. <span class="arithmatex">\(K = {60}\)</span></p>
<p>D. <span class="arithmatex">\(K =  - {112}\)</span></p>
<p>** 2.78 写出具有如下原型的函数的代码:</p>
<hr />
<p>/* Divide by power of 2. Assume <span class="arithmatex">\(0 &lt;  = \mathrm{k} &lt; \mathrm{w} - 1 * /\)</span>
    int divide_power 2( int x, int k ) ;</p>
<hr />
<p>该函数要用正确的舍入方式计算 <span class="arithmatex">\(x/{2}^{k}\)</span> ,并且应该遵循位级整数编码规则。</p>
<p>** 2.79 写出函数 mul 3 div 4 的代码,对于整数参数 <span class="arithmatex">\(\mathrm{x}\)</span> ,计算 <span class="arithmatex">\(3 \star  \mathrm{x}/4\)</span> ,但是要遵循位级整数编码规则。你的代码计算 <span class="arithmatex">\(3 * x\)</span> 也会产生溢出。</p>
<ul>
<li>2.80 写出函数 threefourths 的代码,对于整数参数 <span class="arithmatex">\(\mathrm{x}\)</span> ,计算 <span class="arithmatex">\(3/4\mathrm{x}\)</span> 的值,向零舍入。它不会溢出。函数应该遵循位级整数编码规则。</li>
</ul>
<p><span class="arithmatex">\(*  * {2.81}\)</span> 编写 <span class="arithmatex">\(\mathrm{C}\)</span> 表达式产生如下位模式,其中 <span class="arithmatex">\({a}^{k}\)</span> 表示符号 <span class="arithmatex">\(a\)</span> 重复 <span class="arithmatex">\(k\)</span> 次。假设一个 <span class="arithmatex">\(w\)</span> 位的数据类型。代码可以包含对参数 <span class="arithmatex">\(\mathrm{j}\)</span> 和 <span class="arithmatex">\(\mathrm{k}\)</span> 的引用,它们分别表示 <span class="arithmatex">\(j\)</span> 和 <span class="arithmatex">\(k\)</span> 的值,但是不能使用表示 <span class="arithmatex">\(w\)</span> 的参数。</p>
<!-- Meanless: 第 2 章 信息的表示和处理 93-->

<p>A. <span class="arithmatex">\({1}^{w - k}{0}^{k}\)</span></p>
<p>B. <span class="arithmatex">\({0}^{w - k - j}{1}^{k}{0}^{j}\)</span></p>
<p>*2.82 我们在一个 int 类型值为 32 位的机器上运行程序。这些值以补码形式表示, 而且它们都是算术右移的。unsigned 类型的值也是 32 位的。</p>
<p>我们产生随机数 <span class="arithmatex">\(\mathrm{x}\)</span> 和 <span class="arithmatex">\(\mathrm{y}\)</span> ,并且把它们转换成无符号数,显示如下:</p>
<hr />
<div class="language-text highlight"><pre><span></span><code>/* Create some arbitrary values $*$ /
</code></pre></div>
<p>int x = random (   ) ;
int y = random (   ) ;
    /<em> Convert to unsigned </em>/
unsigned ux = (unsigned) x ;
unsigned uy = (unsigned) y ;</p>
<hr />
<p>对于下列每个 <span class="arithmatex">\(\mathrm{C}\)</span> 表达式,你要指出表达式是否总是为 1 。如果它总是为 1 ,那么请描述其中的数学原理。否则, 列举出一个使它为 0 的参数示例。</p>
<p>A. <span class="arithmatex">\(\left( {x &lt; y}\right)  =  = \left( {-x &gt;  - y}\right)\)</span></p>
<p>B. <span class="arithmatex">\(\left( {\left( {x + y}\right)  &lt;  &lt; 4}\right)  + y - x =  = {17} * y + {15} * x\)</span></p>
<p>C. "x+"y+1==~(x+y)</p>
<p>D. (ux-uy) <span class="arithmatex">\(=  =  -\)</span> (unsigned) (y-x)</p>
<p>E. <span class="arithmatex">\(\left( {\left( {x &gt;  &gt; 2}\right)  &lt;  &lt; 2}\right)  &lt;  = x\)</span></p>
<p><span class="arithmatex">\(*  * {2.83}\)</span> 一些数字的二进制表示是由形如 <span class="arithmatex">\(0.{yyyyyy}\cdots\)</span> 的无穷串组成的,其中 <span class="arithmatex">\(y\)</span> 是一个 <span class="arithmatex">\(k\)</span> 位的序列。例如, <span class="arithmatex">\(\frac{1}{3}\)</span> 的二进制表示是 0.01010101 <span class="arithmatex">\(\cdots \left( {y = {01}}\right)\)</span> ,而 <span class="arithmatex">\(\frac{1}{5}\)</span> 的二进制表示是 0.001100110011 <span class="arithmatex">\(\cdots (y =\)</span> <span class="arithmatex">\({0011})\)</span> 。</p>
<p>A. 设 <span class="arithmatex">\(Y = {B 2}{U}_{k}\left( y\right)\)</span> ,也就是说,这个数具有二进制表示 <span class="arithmatex">\(y\)</span> 。给出一个由 <span class="arithmatex">\(Y\)</span> 和 <span class="arithmatex">\(k\)</span> 组成的公式表示这个无穷串的值。</p>
<p>提示: 请考虑将二进制小数点右移 <span class="arithmatex">\(k\)</span> 位的结果。</p>
<p>B. 对于下列的 <span class="arithmatex">\(y\)</span> 值,串的数值是多少?</p>
<p>(a) 101</p>
<p>(b) 0110</p>
<p>(c) 010011</p>
<ul>
<li>2.84 填写下列程序的返回值, 这个程序测试它的第一个参数是否小于或者等于第二个参数。假定函数 f 2 u 返回一个无符号 32 位数字, 其位表示与它的浮点参数相同。你可以假设两个参数都不是 <span class="arithmatex">\({NaN}\)</span> 。两种 <span class="arithmatex">\(0, + 0\)</span> 和-0 被认为是相等的。</li>
</ul>
<hr />
<p>int float_le(float x, float y) {
    unsigned ux = f 2 u(x);
    unsigned uy = f 2 u(y);
    /<em> Get the sign bits </em>/
    unsigned sx = ux &gt;&gt; 31 ;
    unsigned sy <span class="arithmatex">\(= {uy} \gg  {31}\)</span> ;
    /<em> Give an expression using only ux, uy, sx, and sy </em>/
    return ;
}</p>
<hr />
<ul>
<li>2.85 给定一个浮点格式,有 <span class="arithmatex">\(k\)</span> 位指数和 <span class="arithmatex">\(n\)</span> 位小数,对于下列数,写出阶码 <span class="arithmatex">\(E\)</span> 、尾数 <span class="arithmatex">\(M\)</span> 、小数 <span class="arithmatex">\(f\)</span> 和值 <span class="arithmatex">\(V\)</span> 的公式。另外, 请描述其位表示。</li>
</ul>
<p>A. 数 7.0 。</p>
<p>B. 能够被准确描述的最大奇整数。</p>
<p>C. 最小的规格化数的倒数。</p>
<p>*2.86 与 Intel 兼容的处理器也支持 “扩展精度” 浮点形式, 这种格式具有 80 位字长, 被分成 1 个符号位、 <span class="arithmatex">\(k = {15}\)</span> 个阶码位、 1 个单独的整数位和 <span class="arithmatex">\(n = {63}\)</span> 个小数位。整数位是 IEEE 浮点表示中隐含位的显式副本。也就是说, 对于规格化的值它等于 1 , 对于非规格化的值它等于 0 。填写下表, 给出用这种格式表示的一些 “有趣的” 数字的近似值。</p>
<!-- Meanless: 94 第一部分 程序结构和执行-->

<!-- Media -->

<table><tr><td rowspan="2">描述</td><td colspan="2">扩展精度</td></tr><tr><td>值</td><td>十进制</td></tr><tr><td>最小的正非规格化数</td><td/><td/></tr><tr><td>最小的正规格化数</td><td/><td/></tr><tr><td>最大的规格化数</td><td/><td/></tr></table>

<!-- Media -->

<p>将数据类型声明为 long double,就可以把这种格式用于为与 Intel 兼容的机器编译 <span class="arithmatex">\(\mathrm{C}\)</span> 程序。但是, 它会强制编译器以传统的 8087 浮点指令为基础生成代码。由此产生的程序很可能会比数据类型为 float 或 double 的情况慢上许多。</p>
<ul>
<li>2.87 2008 版 IEEE 浮点标准,即 IEEE 754-2008,包含了一种 16 位的 “半精度” 浮点格式。它最初是由计算机图形公司设计的, 其存储的数据所需的动态范围要高于 16 位整数可获得的范围。这种格式具有 1 个符号位、 5 个阶码位 <span class="arithmatex">\(\left( {k = 5}\right)\)</span> 和 10 个小数位 <span class="arithmatex">\(\left( {n = {10}}\right)\)</span> 。阶码偏置量是 <span class="arithmatex">\({2}^{5 - 1} - 1 = {15}\)</span> 。</li>
</ul>
<p>对于每个给定的数, 填写下表, 其中, 每一列具有如下指示说明:</p>
<p>Hex: 描述编码形式的 4 个十六进制数字。</p>
<p><span class="arithmatex">\(M\)</span> : 尾数的值。这应该是一个形如 <span class="arithmatex">\(x\)</span> 或 <span class="arithmatex">\(\frac{x}{y}\)</span> 的数,其中 <span class="arithmatex">\(x\)</span> 是一个整数,而 <span class="arithmatex">\(y\)</span> 是 2 的整数幂。例如: <span class="arithmatex">\(0\text{、}\frac{67}{64}\)</span> 和 <span class="arithmatex">\(\frac{1}{256}\)</span> 。</p>
<p><span class="arithmatex">\(E\)</span> : 阶码的整数值。</p>
<p><span class="arithmatex">\(V\)</span> : 所表示的数字值。使用 <span class="arithmatex">\(x\)</span> 或者 <span class="arithmatex">\(x \times  {2}^{z}\)</span> 表示,其中 <span class="arithmatex">\(x\)</span> 和 <span class="arithmatex">\(z\)</span> 都是整数。</p>
<p><span class="arithmatex">\(D\)</span> : (可能近似的) 数值,用 printf 的格式规范 %f 打印。</p>
<p>举一个例子,为了表示数 <span class="arithmatex">\(\frac{7}{8}\)</span> ,我们有 <span class="arithmatex">\(s = 0,M = \frac{7}{4}\)</span> 和 <span class="arithmatex">\(E =  - 1\)</span> 。因此这个数的阶码字段为 <span class="arithmatex">\({01110}_{2}\)</span> (十进制值 <span class="arithmatex">\({15} - 1 = {14}\)</span> ),尾数字段为 <span class="arithmatex">\({1100000000}_{2}\)</span> ,得到一个十六进制的表示 <span class="arithmatex">\(3\mathrm{B}{00}\)</span> 。其数值为 0.875 。</p>
<p>标记为 “一” 的条目不用填写。</p>
<!-- Media -->

<table><tr><td>描述</td><td>Hex</td><td>$M$</td><td>$E$</td><td>$V$</td><td>$D$</td></tr><tr><td>-0</td><td/><td/><td/><td>-0</td><td>-0.0</td></tr><tr><td>最小的 $> 2$ 的值</td><td/><td/><td/><td/><td/></tr><tr><td>512</td><td/><td/><td/><td>512</td><td>512.0</td></tr><tr><td>最大的非规格化数</td><td/><td/><td/><td/><td/></tr><tr><td>$\rightarrow  \infty$</td><td/><td>-</td><td>-</td><td>$- \infty$</td><td>$- \infty$</td></tr><tr><td>十六进制表示为 3 BB 0 的数</td><td>3 BB 0</td><td/><td/><td/><td/></tr></table>

<!-- Media -->

<p>** 2.88 考虑下面两个基于 IEEE 浮点格式的 9 位浮点表示。</p>
<ol>
<li>
<p>格式 <span class="arithmatex">\(\mathrm{A}\)</span></p>
</li>
<li>
<p>有一个符号位。</p>
</li>
<li>
<p>有 <span class="arithmatex">\(k = 5\)</span> 个阶码位。阶码偏置量是 15 。</p>
</li>
<li>
<p>有 <span class="arithmatex">\(n = 3\)</span> 个小数位。</p>
</li>
<li>
<p>格式 <span class="arithmatex">\(\mathrm{B}\)</span></p>
</li>
<li>
<p>有一个符号位。</p>
</li>
<li>
<p>有 <span class="arithmatex">\(k = 4\)</span> 个阶码位。阶码偏置量是 7 。</p>
</li>
</ol>
<!-- Meanless: 第 2 章 信息的表示和处理 95-->

<ul>
<li>有 <span class="arithmatex">\(n = 4\)</span> 个小数位。</li>
</ul>
<p>下面给出了一些格式 <span class="arithmatex">\(\mathrm{A}\)</span> 表示的位模式,你的任务是把它们转换成最接近的格式 <span class="arithmatex">\(\mathrm{B}\)</span> 表示的值。如果需要舍入,你要向 <span class="arithmatex">\(+ \infty\)</span> 舍入。另外,给出用格式 <span class="arithmatex">\(\mathrm{A}\)</span> 和格式 <span class="arithmatex">\(\mathrm{B}\)</span> 表示的位模式对应的值。要么是整数 (例如 17),要么是小数 (例如 <span class="arithmatex">\({17}/{64}\)</span> 或 <span class="arithmatex">\({17}/{2}^{6}\)</span> )。</p>
<!-- Media -->

<table><tr><td colspan="2">格式 A</td><td colspan="2">格式 B</td></tr><tr><td>位</td><td>值</td><td>位</td><td>值</td></tr><tr><td>1 01110 001</td><td>$\frac{-9}{16}$</td><td>1 0110 0010</td><td>$\frac{-9}{16}$</td></tr><tr><td>0 10110 101</td><td/><td/><td/></tr><tr><td>1 00111 110</td><td/><td/><td/></tr><tr><td>0 00000 101</td><td/><td/><td/></tr><tr><td>1 11011 000</td><td/><td/><td/></tr><tr><td>0 11000 100</td><td/><td/><td/></tr></table>

<!-- Media -->

<ul>
<li>2.89 我们在一个 int 类型为 32 位补码表示的机器上运行程序。float 类型的值使用 32 位 IEEE 格式, 而 double 类型的值使用 64 位 IEEE 格式。</li>
</ul>
<p>我们产生随机整数 <span class="arithmatex">\(\mathrm{x}\text{、}\mathrm{y}\)</span> 和 <span class="arithmatex">\(\mathrm{z}\)</span> ,并且把它们转换成 double 类型的值:</p>
<hr />
<p>/<em> Create some arbitrary values </em>/
int x = random (   ) ;
int y = random (   ) ;
int z = random (   ) ;
    /<em> Convert to double </em>/
    double dx = (double) x ;
    double dy = (double) y ;
    double dz = (double) z ;</p>
<hr />
<p>对于下列的每个 <span class="arithmatex">\(\mathrm{C}\)</span> 表达式,你要指出表达式是否总是为 1 。如果它总是为 1 , 描述其中的数学原理。否则,列举出使它为 0 的参数的例子。请注意,不能使用 IA 32 机器运行 GCC 来测试你的答案,因为对于 float 和 double,它使用的都是 80 位的扩展精度表示。</p>
<p>A. (float) <span class="arithmatex">\(x =  = \left( \text{float}\right) {dx}\)</span></p>
<p>B. dx-dy= (double) (x-y)</p>
<p>C. <span class="arithmatex">\(\left( {{dx} + {dy}} \right)  + {dz} =  = {dx} + \left( {{dy} + {dz}} \right)\)</span></p>
<p>D. <span class="arithmatex">\(\left( {{dx} * {dy}} \right)  * {dz} =  = {dx} * \left( {{dy} * {dz}} \right)\)</span></p>
<p>E. $\mathrm {{dx}} /\mathrm {{dx}} =  = \mathrm {{dz}} /\mathrm {{dz}} $</p>
<ul>
<li>2.90 分配给你一个任务,编写一个 C 函数来计算 <span class="arithmatex">\({2}^{x}\)</span> 的浮点表示。你意识到完成这个任务的最好方法是直接创建结果的 IEEE 单精度表示。当 <span class="arithmatex">\(x\)</span> 太小时,你的程序将返回 0.0。当 <span class="arithmatex">\(x\)</span> 太大时,它会返回 <span class="arithmatex">\(+ \infty\)</span> 。填写下列代码的空白部分,以计算出正确的结果。假设函数 $\mathrm {{u2f}} $ 返回的浮点值与它的无符号参数有相同的位表示。</li>
</ul>
<hr />
<p>float fpwr 2(int x)
{
    /<em> Result exponent and fraction </em>/
    unsigned exp, frac;
    unsigned u;
    if (x &lt; <strong><em>_</em>) {
        /<em> Too small. Return <span class="arithmatex">\({0.0} * /\)</span>
        exp = <strong><em>_</em>；
        frac = </strong><strong><em>;
    } else if (x &lt; </em></strong>__) {
        /</em> Denormalized result */
        exp = </strong><strong><em>；
        frac = </em></strong>__;</p>
<!-- Meanless: 96 第一部分 程序结构和执行-->

<div class="language-text highlight"><pre><span></span><code>\} else if (x &lt; _____) \{
    /* Normalized result. */
    exp = _____；
    frac = _____;
\} else \{
    /* Too big. Return +oo */
    exp = _____；
    frac = _____;
\}
/* Pack exp and frac into 32 bits */
u = exp &lt;&lt; 23 | frac;
/* Return as float */
return u 2 f (u) ;
</code></pre></div>
<p>}</p>
<hr />
<ul>
<li>2.91 大约公元前 250 年,希腊数学家阿基米德证明了 <span class="arithmatex">\(\frac{223}{71} &lt; \pi  &lt; \frac{22}{7}\)</span> 。如果当时有一台计算机和标准库 <math.h>,他就能够确定 <span class="arithmatex">\(\pi\)</span> 的单精度浮点近似值的十六进制表示为 0 x 40490 FDB。当然,所有的这些都只是近似值,因为 <span class="arithmatex">\(\pi\)</span> 不是有理数。</li>
</ul>
<p>A. 这个浮点值表示的二进制小数是多少?</p>
<p>B. <span class="arithmatex">\(\frac{22}{7}\)</span> 的二进制小数表示是什么? 提示: 参见家庭作业 2.83。</p>
<p>C. 这两个 <span class="arithmatex">\(\pi\)</span> 的近似值从哪一位 (相对于二进制小数点) 开始不同的?</p>
<p>位级浮点编码规则</p>
<p>在接下来的题目中, 你所写的代码要实现浮点函数在浮点数的位级表示上直接运算。你的代码应该完全遵循 IEEE 浮点运算的规则, 包括当需要舍入时, 要使用向偶数舍入的方式。</p>
<p>为此, 我们把数据类型 float-bits 等价于 unsigned:</p>
<hr />
<p>/<em> Access bit-level representation floating-point number </em>/
typedef unsigned float_bits;</p>
<hr />
<p>你的代码中不使用数据类型 float, 而要使用 float_bits。你可以使用数据类型 int 和 unsigned, 包括无符号和整数常数和运算。你不可以使用任何联合、结构和数组。更重要的是, 你不能使用任何浮点数据类型、运算或者常数。取而代之, 你的代码应该执行实现这些指定的浮点运算的位操作。</p>
<p>下面的函数说明了对这些规则的使用。对于参数 <span class="arithmatex">\(f\)</span> ,如果 <span class="arithmatex">\(f\)</span> 是非规格化的,该函数返回 <span class="arithmatex">\(\pm  0\)</span> (保持 <span class="arithmatex">\(f\)</span> 的符号),否则,返回 <span class="arithmatex">\(f\)</span> 。</p>
<hr />
<p>/<em> If <span class="arithmatex">\(f\)</span> is denorm,return 0 . Otherwise,return <span class="arithmatex">\(f * /\)</span>
float_bits float_denorm_zero(float_bits f) {
    /</em> Decompose bit representation into parts <em>/
    unsigned sign <span class="arithmatex">\(= f &gt;  &gt; {31}\)</span> ;
    unsigned exp = f <span class="arithmatex">\(&gt;  &gt; {23}\)</span> &amp; 0 xFF;
    unsigned frac $= f\;\&amp; \;0 \times  7\mathrm {{FFFFF}} $ ;
    if (exp == 0) {
        /</em> Denormalized. Set fraction to <span class="arithmatex">\(0 * /\)</span>
        frac = 0 ;
    }
    /<em> Reassemble bits </em>/
    return (sign &lt;&lt; 31) | (exp &lt;&lt; 23) | frac;
}</p>
<hr />
<p>** 2.92 遵循位级浮点编码规则,实现具有如下原型的函数：</p>
<hr />
<p>/* Compute -f. If <span class="arithmatex">\(f\)</span> is NaN,then return <span class="arithmatex">\(f. * /\)</span>
float_bits float_negate(float_bits f);</p>
<hr />
<p>对于浮点数 <span class="arithmatex">\(f\)</span> ,这个函数计算 <span class="arithmatex">\(- f\)</span> 。如果 <span class="arithmatex">\(f\)</span> 是 <span class="arithmatex">\({NaN}\)</span> ,你的函数应该简单地返回 <span class="arithmatex">\(f\)</span> 。</p>
<p>测试你的函数,对参数 <span class="arithmatex">\(f\)</span> 可以取的所有 <span class="arithmatex">\({2}^{32}\)</span> 个值求值,将结果与你使用机器的浮点运算得到的结果</p>
<!-- Meanless: 第 2 章 信息的表示和处理 97-->

<p>相比较。</p>
<p>** 2.93 遵循位级浮点编码规则,实现具有如下原型的函数：</p>
<hr />
<div class="language-text highlight"><pre><span></span><code>/* Compute $\left| f\right|$ . If $f$ is NaN,then return $f. * /$
</code></pre></div>
<p>float_bits float_absval(float_bits f);</p>
<hr />
<p>对于浮点数 <span class="arithmatex">\(f\)</span> ,这个函数计算 <span class="arithmatex">\(\left| f\right|\)</span> 。如果 <span class="arithmatex">\(f\)</span> 是 <span class="arithmatex">\({NaN}\)</span> ,你的函数应该简单地返回 <span class="arithmatex">\(f\)</span> 。</p>
<p>测试你的函数,对参数 <span class="arithmatex">\(f\)</span> 可以取的所有 <span class="arithmatex">\({2}^{32}\)</span> 个值求值,将结果与你使用机器的浮点运算得到的结果相比较。</p>
<p>** 2.94 遵循位级浮点编码规则,实现具有如下原型的函数：</p>
<hr />
<p>/<em> Compute 2</em>f. If <span class="arithmatex">\(f\)</span> is NaN,then return <span class="arithmatex">\(f. * /\)</span>
float_bits float_twice(float_bits f);</p>
<hr />
<p>对于浮点数 <span class="arithmatex">\(f\)</span> ,这个函数计算 <span class="arithmatex">\({2.0} \cdot  f\)</span> 。如果 <span class="arithmatex">\(f\)</span> 是 <span class="arithmatex">\({NaN}\)</span> ,你的函数应该简单地返回 <span class="arithmatex">\(f\)</span> 。</p>
<p>测试你的函数,对参数 <span class="arithmatex">\(f\)</span> 可以取的所有 <span class="arithmatex">\({2}^{32}\)</span> 个值求值,将结果与你使用机器的浮点运算得到的结果相比较。</p>
<p>** 2.95 遵循位级浮点编码规则,实现具有如下原型的函数：</p>
<hr />
<p>/<em> Compute 0.5</em>f. If <span class="arithmatex">\(f\)</span> is NaN,then return <span class="arithmatex">\(f. * /\)</span>
    float_bits float_half(float_bits f);</p>
<hr />
<p>对于浮点数 <span class="arithmatex">\(f\)</span> ,这个函数计算 <span class="arithmatex">\({0.5} \cdot  f\)</span> 。如果 <span class="arithmatex">\(f\)</span> 是 <span class="arithmatex">\({NaN}\)</span> ,你的函数应该简单地返回 <span class="arithmatex">\(f\)</span> 。</p>
<p>测试你的函数,对参数 <span class="arithmatex">\(f\)</span> 可以取的所有 <span class="arithmatex">\({2}^{32}\)</span> 个值求值,将结果与你使用机器的浮点运算得到的结果相比较。</p>
<p>** 2.96 遵循位级浮点编码规则,实现具有如下原型的函数：</p>
<hr />
<p>/<em>
                                                            * Compute (int) f.
                                                        * If conversion causes overflow or <span class="arithmatex">\(f\)</span> is $\mathrm {{NaN}} $ ,return <span class="arithmatex">\(0 \times  {80000000}\)</span>
                                                </em>/
    int float_f 2 i(float_bits f);</p>
<hr />
<p>对于浮点数 <span class="arithmatex">\(f\)</span> ,这个函数计算 (int) <span class="arithmatex">\(f\)</span> 。如果 <span class="arithmatex">\(f\)</span> 是 <span class="arithmatex">\({NaN}\)</span> ,你的函数应该向零舍入。如果 <span class="arithmatex">\(f\)</span> 不能用整数表示 (例如,超出表示范围,或者它是一个 <span class="arithmatex">\({NaN}\)</span> ),那么函数应该返回 0 x 80000000。</p>
<p>测试你的函数,对参数 <span class="arithmatex">\(f\)</span> 可以取的所有 <span class="arithmatex">\({2}^{32}\)</span> 个值求值,将结果与你使用机器的浮点运算得到的结果相比较。</p>
<p>:: 2.97 遵循位级浮点编码规则,实现具有如下原型的函数：</p>
<hr />
<p>/<em> Compute (float) i </em>/
float_bits float_i 2 f(int i);</p>
<hr />
<p>对于函数 <span class="arithmatex">\(\mathrm{i}\)</span> ,这个函数计算 (float) <span class="arithmatex">\(\mathrm{i}\)</span> 的位级表示。</p>
<p>测试你的函数,对参数 <span class="arithmatex">\(f\)</span> 可以取的所有 <span class="arithmatex">\({2}^{32}\)</span> 个值求值,将结果与你使用机器的浮点运算得到的结果相比较。</p>







  
  






  <h2 id="__comments">Comments</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
        data-repo="syiooo/syiooo.github.io"
        data-repo-id="R_kgDOPeemcg"
        data-category="Show and tell"
        data-category-id="DIC_kwDOPeemcs4CuRNW"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant.progress", "navigation.tracking", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "content.code.copy", "content.code.select", "navigation.tabs", "content.footnote.tooltips"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>